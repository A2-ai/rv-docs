---
title: rv upgrade
description: Ignore the lockfile during a sync
---

import { FileTree, Tabs, TabItem } from '@astrojs/starlight/components';

`rv` will [resolve](../../concepts/resolution) packages from the source and the version it is locked at. 
`rv upgrade` will ignore the lockfile, re-resolve, and install changed packages. This does not guarantee packages will be 
installed from the same repository, simply installs packages as if there was no lockfile present.

## Usage:
```shell
rv upgrade [OPTIONS]
```

### Options
* `--dry-run` - No changes made, only reports what would happen if the command was run.

## Example
In this example, we will start with the following config and lock files:

<Tabs>
    <TabItem label = "Config File">
        ```{toml}
        // rproject.toml
        [project]
        name = "upgrade"
        r_version = "4.4"

        repositories = [
            { alias = "PPM", url = "https://packagemanager.posit.co/cran/2025-01-01" },
        ]

        dependencies = [
            "R6",
        ]
        ```
    </TabItem>
    <TabItem label = "Lock File">
        ```{toml}
        // rv.lock
        # This file is automatically @generated by rv.
        # It is not intended for manual editing.
        version = 2
        r_version = "4.4"

        [[packages]]
        name = "R6"
        version = "2.5.1"
        source = { repository = "https://packagemanager.posit.co/cran/2025-01-01" }
        force_source = false
        dependencies = []
        ```
    </TabItem>
</Tabs>

Adding a new repository as the first repository in the config does not change the project since `R6` is locked to be
installed from `PPM`:

<Tabs>
    <TabItem label = "Config File">
        ```{toml}
        // rproject.toml
        [project]
        name = "upgrade"
        r_version = "4.4"

        repositories = [
            { alias = "PPM_new", url = "https://packagemanager.posit.co/cran/latest" },
            { alias = "PPM", url = "https://packagemanager.posit.co/cran/2025-01-01" },
        ]

        dependencies = [
            "R6",
        ]
        ```
    </TabItem>
    <TabItem label = "rv sync results">
    ```{shell}
    % rv sync
    Nothing to do
    ```
    </TabItem>
    <TabItem label = "Lock File">
        ```{toml}
        // rv.lock
        # This file is automatically @generated by rv.
        # It is not intended for manual editing.
        version = 2
        r_version = "4.4"

        [[packages]]
        name = "R6"
        version = "2.5.1"
        source = { repository = "https://packagemanager.posit.co/cran/2025-01-01" }
        force_source = false
        dependencies = []
        ```
    </TabItem>
</Tabs>

Running `rv upgrade` ignores the lockfile and is [resolved](../../concepts/resolution) to come from the first repository, `PPM_new`.

<Tabs>
    <TabItem label = "rv upgrade results">
    ```{shell}
    % rv upgrade
    - R6
    + R6 (2.6.1, binary from https://packagemanager.posit.co/cran/latest) in 0ms
    ```
    </TabItem>
    <TabItem label = "Lock File">
        ```{toml}
        // rv.lock
        # This file is automatically @generated by rv.
        # It is not intended for manual editing.
        version = 2
        r_version = "4.4"

        [[packages]]
        name = "R6"
        version = "2.6.1"
        source = { repository = "https://packagemanager.posit.co/cran/latest" }
        force_source = false
        dependencies = []
        ```
    </TabItem>
</Tabs>
